{% extends "base.html" %}

{% block title %}Histórico de Conferências{% endblock %}

{% block content %}
<section class="form-container" style="max-width: 1200px;">
    <h2>Filtrar Histórico de Conferências</h2>
    <form id="form-filtros-historico">
        <div class="layout-grid-4-cols" style="gap: 1rem;">
            <div class="form-group"><label for="filtro-nf">Nº Nota Fiscal</label><input type="text" id="filtro-nf">
            </div>
            <div class="form-group"><label for="filtro-fornecedor">Fornecedor</label><input type="text"
                    id="filtro-fornecedor"></div>
            <div class="form-group"><label for="filtro-data-inicio">De:</label><input type="date"
                    id="filtro-data-inicio"></div>
            <div class="form-group"><label for="filtro-data-fim">Até:</label><input type="date" id="filtro-data-fim">
            </div>
        </div>
        <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
            <button type="submit" class="btn btn--primary" style="flex-grow: 1;">Filtrar</button>
            <button type="button" id="btn-limpar-filtros" class="btn btn--secondary"
                style="flex-grow: 1;">Limpar</button>
        </div>
    </form>
</section>

<hr>

<section>
    <div class="quadro-coluna">
        <h2>Conferências Finalizadas</h2>
        <!-- 
            --- INÍCIO DA CORREÇÃO ---
            Trocamos a classe 'quadro-container' pela classe 'layout-grid-4-cols'.
            Isso força o layout a ter exatamente 4 colunas.
        -->
        <div id="quadro-historico" class="layout-grid-4-cols">
            <!-- Cards do histórico serão inseridos aqui em 4 colunas -->
        </div>
        <!-- --- FIM DA CORREÇÃO --- -->
    </div>
</section>

<div id="pagination-container" class="pagination-container">
    <div id="loading-spinner" class="spinner" style="display: none;"></div>
    <button id="btn-carregar-mais" class="btn btn--secondary" style="display: none;">Carregar mais antigas</button>
</div>
<div id="reiniciar-conferencia-modal-overlay" class="modal-overlay" style="display:none;">
    <div class="modal-content" style="max-width: 500px;">
        <div class="modal-header">
            <h2>Reiniciar Conferência</h2>
            <button class="close-modal close-modal-icon">×</button>
        </div>
        <form id="form-reiniciar-conferencia">
            <div class="modal-body">
                <p>Você está prestes a retornar esta conferência para o status "Em Conferência". Esta ação será
                    registrada.</p>
                <div class="form-group">
                    <label for="reiniciar-autor">Seu Nome (Responsável)</label>
                    <input type="text" id="reiniciar-autor" required>
                </div>
                <div class="form-group">
                    <label for="reiniciar-motivo">Motivo para Reiniciar (Obrigatório)</label>
                    <textarea id="reiniciar-motivo" rows="4" required></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn--secondary close-modal">Cancelar</button>
                <button type="submit" class="btn btn--danger">Confirmar e Reiniciar</button>
            </div>
        </form>
    </div>
</div>
<!-- --- FIM DO NOVO CÓDIGO --- -->
{% endblock %}