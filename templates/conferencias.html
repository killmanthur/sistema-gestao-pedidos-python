{% extends "base.html" %}

{% block title %}Quadro de ConferÃªncia{% endblock %}

{% block content %}
<section class="filtro-container-actions" style="margin: 0 auto 1.5rem; max-width: 1200px;">
    <input type="text" id="filtro-conferencias" placeholder="ðŸ”Ž Buscar por NÂº NF, Fornecedor...">
</section>

<section class="layout-grid-4-cols">
    <div class="quadro-coluna">
        <h2>Aguardando ConferÃªncia</h2>
        <div id="quadro-aguardando" class="quadro-container"></div>
    </div>
    <div class="quadro-coluna">
        <h2>Em ConferÃªncia</h2>
        <div id="quadro-em-conferencia" class="quadro-container"></div>
    </div>
    <div class="quadro-coluna">
        <h2>PendÃªncias (Fornecedor)</h2>
        <div id="quadro-pendencia-fornecedor" class="quadro-container"></div>
    </div>
    <div class="quadro-coluna">
        <h2>PendÃªncias (Contabilidade)</h2>
        <div id="quadro-pendencia-contabilidade" class="quadro-container"></div>
    </div>
</section>

<!-- MODAIS -->

<!-- Modal para Iniciar ConferÃªncia -->
<div id="add-conferente-modal-overlay" class="modal-overlay" style="display:none;">
    <div class="modal-content" style="max-width: 400px;">
        <div class="modal-header">
            <h2>Iniciar ConferÃªncia</h2>
            <button class="close-modal close-modal-icon">Ã—</button>
        </div>
        <form id="form-add-conferente">
            <div class="modal-body">
                <p>Selecione um ou mais conferentes.</p>
                <div id="conferentes-checkbox-container" class="permissions-grid" style="grid-template-columns: 1fr;">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn--secondary close-modal">Cancelar</button>
                <button type="submit" class="btn btn--primary">Confirmar e Iniciar</button>
            </div>
        </form>
    </div>
</div>

<!-- Modal para Finalizar ConferÃªncia -->
<div id="finalize-modal-overlay" class="modal-overlay" style="display:none;">
    <div class="modal-content" style="max-width: 500px;">
        <div class="modal-header">
            <h2>Finalizar ConferÃªncia</h2>
            <button class="close-modal close-modal-icon">Ã—</button>
        </div>
        <form id="form-finalize-conferencia">
            <div class="modal-body">
                <p>Se houver qualquer divergÃªncia, marque a opÃ§Ã£o correspondente e descreva o problema.</p>
                <hr style="margin: 1rem 0;">
                <div class="form-group" style="display: flex; flex-direction: column; gap: 0.75rem;">
                    <label style="display: flex; align-items: center; gap: 0.75rem; margin: 0;">
                        <input type="checkbox" id="checkbox-pendencia-fornecedor">
                        HÃ¡ pendÃªncias com o Fornecedor? (Ex: item faltante, avariado)
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.75rem; margin: 0;">
                        <input type="checkbox" id="checkbox-solicitar-alteracao">
                        HÃ¡ erro de lanÃ§amento? (Ex: cÃ³digo/quantidade errada no sistema)
                    </label>
                </div>
                <div class="form-group" style="margin-top: 1.5rem;">
                    <label for="finalize-observacao">ObservaÃ§Ã£o da DivergÃªncia (ObrigatÃ³ria se marcada)</label>
                    <textarea id="finalize-observacao" rows="4"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn--secondary close-modal">Cancelar</button>
                <button type="submit" class="btn btn--primary">Confirmar FinalizaÃ§Ã£o</button>
            </div>
        </form>
    </div>
</div>

<!-- Modal para Resolver PendÃªncia -->
<div id="resolver-modal-overlay" class="modal-overlay" style="display:none;">
    <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header">
            <h2 id="resolver-modal-title">Resolver Item</h2>
            <button class="close-modal close-modal-icon">Ã—</button>
        </div>
        <form id="form-resolver">
            <div class="modal-body">
                <div class="obs-log-container" id="historico-observacoes"
                    style="margin-bottom: 1rem; max-height: 200px;"></div>
                <div class="form-group">
                    <label for="resolver-observacao">Adicionar ObservaÃ§Ã£o de ResoluÃ§Ã£o</label>
                    <textarea id="resolver-observacao" rows="3" required></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn--secondary close-modal">Cancelar</button>
                <button type="button" id="btn-add-update" class="btn btn--info">Adicionar AtualizaÃ§Ã£o</button>
                <button type="submit" class="btn btn--primary">Marcar como Resolvido</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}