{% extends "base.html" %}

{% block title %}Pend√™ncias e Altera√ß√µes{% endblock %}

{% block content %}
<section class="filtro-container-actions" style="margin: 0 auto 1.5rem; max-width: 1000px;">
    <input type="text" id="filtro-pendencias" placeholder="üîé Buscar por N¬∫ NF, Fornecedor...">
</section>

<section class="layout-grid-3-cols">
    <div class="quadro-coluna" id="coluna-pendencia-fornecedor" style="display: none;">
        <h2>Pend√™ncias (Fornecedor)</h2>
        <div id="quadro-pendencia-fornecedor" class="quadro-container"></div>
    </div>
    <div class="quadro-coluna" id="coluna-solicitacao-alteracao" style="display: none;">
        <h2>Solicita√ß√µes (Contabilidade)</h2>
        <div id="quadro-solicitacao-alteracao" class="quadro-container"></div>
    </div>
    <div class="quadro-coluna">
        <h2>Resolvidos / Finalizados</h2>
        <div id="quadro-resolvidos" class="quadro-container"></div>
    </div>

    <div id="pagination-resolvidos" class="pagination-container">
        <div id="loading-spinner-resolvidos" class="spinner" style="display: none;"></div>
        <button id="btn-carregar-mais-resolvidos" class="btn btn--secondary" style="display: none;">Carregar mais
            antigos</button>
    </div>
    </div>
</section>

<!-- Modal para Resolver Pend√™ncias/Altera√ß√µes -->
<div id="resolver-modal-overlay" class="modal-overlay" style="display:none;">
    <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header">
            <h2 id="resolver-modal-title">Resolver Item</h2>
            <button class="close-modal close-modal-icon">√ó</button>
        </div>
        <form id="form-resolver">
            <div class="modal-body">
                <div class="obs-log-container" id="historico-observacoes"
                    style="margin-bottom: 1rem; max-height: 200px;"></div>
                <div class="form-group">
                    <label for="resolver-observacao">Adicionar Observa√ß√£o de Resolu√ß√£o</label>
                    <textarea id="resolver-observacao" rows="3" required></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn--secondary close-modal">Cancelar</button>
                <button type="button" id="btn-add-update" class="btn btn--secondary">Adicionar Atualiza√ß√£o</button>
                <button type="submit" class="btn btn--primary">Marcar como Resolvido</button>
            </div>
        </form>
    </div>
</div>

<!-- Modal para Edi√ß√£o de Recebimento -->
<div id="edit-recebimento-modal-overlay" class="modal-overlay" style="display:none;">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="edit-recebimento-modal-title">Editar Recebimento</h2>
            <button class="close-modal close-modal-icon">√ó</button>
        </div>
        <form id="form-edit-recebimento" novalidate>
            <div class="modal-body">
                <div class="form-group">
                    <label for="edit-numero-nota-fiscal">N¬∫ Nota Fiscal</label>
                    <input type="text" id="edit-numero-nota-fiscal" required>
                </div>
                <div class="form-group">
                    <label for="edit-nome-fornecedor">Nome do Fornecedor</label>
                    <input type="text" id="edit-nome-fornecedor" required>
                </div>
                <div class="form-group">
                    <label for="edit-nome-transportadora">Transportadora</label>
                    <input type="text" id="edit-nome-transportadora" required>
                </div>
                <div class="form-group">
                    <label for="edit-qtd-volumes">Qtd. Volumes</label>
                    <input type="number" id="edit-qtd-volumes" required min="1">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="btn-excluir-recebimento" class="btn btn--danger"
                    style="margin-right: auto; display: none;">Excluir</button>
                <button type="button" class="btn btn--secondary close-modal">Cancelar</button>
                <button type="submit" class="btn btn--primary">Salvar Altera√ß√µes</button>
            </div>
        </form>
    </div>
</div>

<!-- ****** NOVO MODAL ADICIONADO AQUI ****** -->
<div id="solicitar-alteracao-modal-overlay" class="modal-overlay" style="display:none;">
    <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header">
            <h2>Solicitar Altera√ß√£o</h2>
            <button class="close-modal close-modal-icon">√ó</button>
        </div>
        <form id="form-solicitar-alteracao">
            <div class="modal-body">
                <p>Descreva abaixo qual altera√ß√£o √© necess√°ria. Esta informa√ß√£o ser√° enviada para a Contabilidade.</p>
                <div class="form-group">
                    <label for="solicitar-alteracao-observacao">Observa√ß√£o da Solicita√ß√£o</label>
                    <textarea id="solicitar-alteracao-observacao" rows="4" required></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn--secondary close-modal">Cancelar</button>
                <button type="submit" class="btn btn--primary">Confirmar Solicita√ß√£o</button>
            </div>
        </form>
    </div>
</div>

{% endblock %}